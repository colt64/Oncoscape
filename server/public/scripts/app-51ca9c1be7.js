!function(){"use strict";angular.module("oncoscape",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","ui-rangeSlider","toastr"])}(),function(){"use strict";function e(){function e(e,t,a){var n=this;n.datasource=a.datasource||"DEMOdz",n.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png"},{name:"Pathways",route:"pathways",img:"pathways.png"},{name:"Partial Least Squares Regression (PLSR)",route:"plsr",img:"plsr.png"},{name:"Principal Components Analysis (PCA)",route:"pca",img:"pca.png"},{name:"Patient History",route:"history",img:"history.png"},{name:"MetaData",route:"metadata",img:"metadata.png"},{name:"Timelines (Beta)",route:"timelines",img:"tool.png"},{name:"Survival (Coming Soon)",route:"timelines",img:"tool.png"}],n.explore=function(e,a){t.go(e,{datasource:a})}}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/tools/tools.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTools",e)}(),function(){"use strict";function e(){function e(e,t,a){var n=this;n.datasource=a.datasource||"DEMOdz",n.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},e.setBusy(!0)("Loading Dataset"),e.setDataset(n.datasource).then(function(){e.getTimelines().then(function(){e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/timelines/timelines.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTimelines",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,r){var s=this;s.datasource=a.datasource||"DEMOdz",s.deathMinFilter=s.deathMinValue=45,s.deathMaxFilter=s.deathMaxValue=66,s.survivalMinFilter=s.survivalMinValue=3,s.survivalMaxFilter=s.survivalMaxValue=7,s.geneSets=[],s.geneSet=null,s.frame,s.tip=null,s.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},s.update=function(){d(!0)};var l=angular.element("#plsr-chart"),c=function(){function e(e,t,l){n&&n.remove(),a&&a.remove();var u=-1*e;d=i.scale.linear().domain([u,e]).range([0,g]),p=i.scale.linear().domain([u,e]).range([m,0]),c=h.selectAll("text").data(t).enter().append("text").attr("class","text").attr("x",function(e){return d(e[0])}).attr("y",function(e){return p(e[1])}).text(function(e){return e.name}).attr("text-anchor",function(e){var t=e[0]>0?"start":"end";return t}).style("fill","black"),a=h.selectAll("line").data(t).enter().append("line").attr("class","line").style("stroke-width",3).style("stroke",function(e){return e.name.indexOf("Age")?"#1396de":"#38347b"}).attr("x1",d(0)).attr("y1",p(0)).attr("x2",function(e){return d(e[0])}).attr("y2",function(e){return p(e[1])}),n=h.selectAll("circle").data(l).enter().append("circle").attr("cx",function(e){return d(e[0])}).attr("cy",function(e){return p(e[1])}).attr("r",function(){return 3}).style("fill","black").on("click",function(e){angular.element("#plsr-webpage").modal();var t="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.name;o.$apply(function(){s.frame=r.trustAsResourceUrl(t)})}).on("mouseover",function(e){var t=i.mouse(this);f.text(e.name).style("top",t[1]+160+"px").style("left",t[0]+10+"px").style("visibility","visible")}).on("mousemove",function(){var e=i.mouse(this);f.style("top",e[1]+160+"px").style("left",e[0]+10+"px")}).on("mouseout",function(){return f.style("visibility","hidden")})}function t(e,t,o){c.data(t).transition().duration(900).attr("x",function(e){return d(e[0])}).attr("y",function(e){return p(e[1])}),a.data(t).transition().duration(900).attr("x1",d(0)).attr("y1",p(0)).attr("x2",function(e){return d(e[0])}).attr("y2",function(e){return p(e[1])}),n.data(o).transition().duration(900).each("start",function(){i.select(this)}).delay(function(e,t){return t/o.length*500}).attr("cx",function(e){return d(e[0])}).attr("cy",function(e){return p(e[1])}).each("end",function(){i.select(this).transition().duration(500).style("fill","black").attr("r",3)})}var a,n,c,d,p,u={top:20,right:20,bottom:30,left:40},g=l.width()-u.left-u.right,m=l.height()-u.top-u.bottom,h=i.select("#plsr-chart").append("svg").attr("id","chart").attr("width",g).attr("height",m),f=h.append("div").style("position","absolute").style("z-index","10").style("visibility","hidden");return{create:e,update:t}}("#plsr-chart");e.setBusy(!0)("Loading Dataset"),e.setDataset(s.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PLSR Matrix"),e.getPLSR(s.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(t){s.geneSets=t.payload,s.geneSet=s.geneSets[0],e.setBusyMessage("Loading Patients"),e.getSummarizedPLSRPatientAttributes().then(function(e){var t=e.payload;s.deathMinValue=Math.floor(t.AgeDx[0]/365.24),s.deathMaxValue=Math.floor(t.AgeDx[4]/365.24),s.survivalMinValue=Math.floor(t.Survival[0]/365.24),s.survivalMaxValue=Math.floor(t.Survival[4]/365.24),o.$watch("vm.geneSet",function(){d(!1)})})})})});var d=function(t){e.setBusyMessage("Calculating PLSR");var a=[{name:"Survival",low:365.24*Number(s.survivalMinFilter),high:365.24*Number(s.survivalMaxFilter)},{name:"AgeDx",low:365.24*Number(s.deathMinFilter),high:365.24*Number(s.deathMaxFilter)}];e.getCalculatedPLSR(s.geneSet,a).then(function(a){e.setBusyMessage("Rendering PLSR");var n=a.payload,o=n.loadings.map(function(e,t){return e.name=n.loadingNames[t],e}),i=n.vectors.map(function(e,t){return e.name=n.vectorNames[t],e}),r=1.2*n.maxValue;t?c.update(r,i,o):c.create(r,i,o),e.setBusy(!1)})}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3","$sce"];var t={restrict:"E",templateUrl:"app/components/plsr/plsr.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPlsr",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i){var r=this;r.datasource=a.datasource||"DEMOdz",r.geneSets=[],r.geneSet=null,r.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var s=angular.element("#pca-chart"),l=i.select("#pca-chart").append("svg").attr("id","chart"),c=l.append("g"),d=l.append("g");e.setBusy(!0)("Loading Dataset"),e.setDataset(r.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(r.datasource,a).then(function(){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){r.geneSets=e.payload,r.geneSet=r.geneSets[0],o.$watch("vm.geneSet",function(){p()})})})});var p=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA(r.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var a=t.payload;r.pc1=t.payload["importance.PC1"],r.pc2=t.payload["importance.PC2"],u(a.scores),e.setBusy(!1)})},u=function(e){var t,a,n=s.width(),o=s.height();t=i.max(e,function(e){return+e[0]}),a=i.min(e,function(e){return+e[0]});var r=1.2*(Math.abs(t)>Math.abs(a)?t:a);t=i.max(e,function(e){return+e[1]}),a=i.min(e,function(e){return+e[1]});var p=1.2*(Math.abs(t)>Math.abs(a)?t:a),u=i.scale.linear().domain([-r,r]).range([0,n]),g=i.scale.linear().domain([-p,p]).range([o,0]),m=i.svg.axis().scale(u).orient("top").ticks(5),h=i.svg.axis().scale(g).orient("left").ticks(5);l.attr("width",n).attr("height",o);var f=l.selectAll("circle").data(e,function(e){return e});f.enter().append("circle").attr("cx",.5*n).attr("cy",.5*o).attr("r",function(){return 3}).style("fill-opacity","0").transition().duration(750).delay(function(e,t){return t/300*500}).attr("cx",function(e){return u(e[0])}).attr("cy",function(e){return g(e[1])}).style("fill-opacity",1),f.exit().transition().duration(600).delay(function(e,t){return t/300*500}).attr("cx",.5*n).attr("cy",.5*o).style("fill-opacity","0").remove(),c.attr("class","axis").attr("transform","translate(0, "+g(0)+")").call(m).append("text").text("PC1"),d.attr("class","axis").attr("transform","translate("+u(0)+", 0)").call(h).append("text").attr("y",10).attr("dy",".71em").text("PC2")}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3"];var t={restrict:"E",templateUrl:"app/components/pca/pca.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i){function r(){var e="rgb(5, 108, 225)",t="red",a="rgb(56, 52,123)",n="green";return[{selector:"node",style:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"ellipse",width:"60px",height:"50px",color:e,"background-color":"rgb(250, 250, 250)","border-width":"2px","border-color":e}},{selector:"edge",style:{width:"2px","line-color":e,"line-style":"solid"}},{selector:'node[nodeType="class"], node[nodeType="family"], node[nodeType="complex"]',style:{content:"","background-color":"white",shape:"roundrectangle"}},{selector:'edge[edgeType="activates"], edge[edgeType="indirectly activates"]',style:{"line-color":n,"target-arrow-shape":"triangle","target-arrow-color":n}},{selector:'edge[edgeType="inhibits"], edge[edgeType="ubiquitinylates"]',style:{"line-color":t,"target-arrow-shape":"tee","target-arrow-color":t}},{selector:'edge[edgeType="fusion"]',style:{"line-color":n}},{selector:'edge[edgeType="contains"]',style:{display:"none"}},{selector:'node[nodeType="process"]',style:{}},{selector:"node:selected",style:{"overlay-opacity":"0.5","overlay-color":"red"}},{selector:'node[nodeType="rtk"]',style:{content:"data(label)","background-color":"rgb(224, 209, 178)","border-color":"black","border-width":"0px","font-size":"48px",shape:"roundrectangle",width:"40px",height:"160px"}},{selector:'node[nodeType="kinase"]',style:{content:"data(label)","background-color":"rgb(255, 206, 194)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="dimer"]',style:{content:"","background-color":"rgb(234, 219, 188)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="loop"]',style:{content:"","background-color":"rgb(255, 255, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px","border-style":"dotted"}},{selector:'node[nodeType="gtpase"]',style:{content:"data(label)","background-color":"rgb(194, 194, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="adaptor"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="GEF"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="process"]',style:{content:"data(label)","background-color":"rgb(255, 255, 255)",shape:"roundrectangle",width:"100px",height:"40px","font-size":"24px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="TF"]',style:{content:"data(label)","background-color":"rgb(255, 206, 94)",shape:"diamond",width:"160px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="gene fusion"]',style:{content:"data(label)",shape:"roundrectangle","font-size":"24px","border-color":"red","border-width":"3px"}},{selector:"edge:selected",style:{"overlay-color":"grey","overlay-opacity":"0.3"}},{selector:'edge[edgeType="recruits"]',style:{width:"2px"}},{selector:'edge[edgeType="fusion"]',style:{"line-color":a}},{selector:'edge[edgeType="recruits"]',style:{"line-color":"red",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","target-arrow-color":"black"}},{selector:'edge[edgeType="cycles"]',style:{"line-color":"black",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-color":"green","source-arrow-color":"red"}},{selector:'edge[edgeType="associates"]',style:{"line-color":"black",width:"1px","line-style":"solid"}},{selector:'edge[edgeType="activation"]',style:{"line-color":"green",width:"1px"}},{selector:'edge[edgeType="inhibition"]',style:{"line-color":"red",width:"1px"}}]}var s,l=this;l.datasource=a.datasource||"DEMOdz",l.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},l.search="",l.frame,l.tip=null;var c,d=angular.element("#gbm-chart");n.$watch("vm.search",function(){if(!angular.isUndefined(c)){var e=l.search.toUpperCase(),t=e.length;c.nodes().map(function(a){0==t?a.unselect():a.attr("name").substr(0,t)===e?a.select():a.unselect()})}}),e.setBusy(!0),e.setDataset(l.datasource).then(function(){e.getPathway().then(function(t){s=angular.fromJson(t.payload),c=i({container:d,elements:s.elements,style:r(),layout:{name:"preset",fit:!0}}).on("select","node",function(e){angular.element("#gbm-webpage").modal();var t="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.cyTarget.data().id;n.$apply(function(){l.frame=o.trustAsResourceUrl(t)})}).on("select","edge",function(e){angular.element("#gbm-webpage").modal();var t="http://www.ncbi.nlm.nih.gov/pubmed/?term="+e.cyTarget.data().pmid;n.$apply(function(){l.frame=o.trustAsResourceUrl(t)})}).on("mouseover","edge",function(e){n.$apply(function(){l.tip=e.cyTarget.data().source+" Extract"}),e.cyTarget.style({width:"4px"})}).on("mouseout","edge",function(e){n.$apply(function(){l.tip=null}),e.cyTarget.style({width:"2px"})}).on("mouseover","node",function(e){n.$apply(function(){l.tip=e.cyTarget.data().name+" Gene Card"})}).on("mouseout","node",function(){n.$apply(function(){l.tip=null})}),e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams","$scope","$sce","cytoscape"];var t={restrict:"E",templateUrl:"app/components/pathways/pathways.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPathways",e)}(),function(){"use strict";function e(e,t){function a(){var t=null,a=null,n=function(e){a.children=a.children||[],a.children.push(e),a=e,c.dispatch(a),d.dispatch(a)},o=function(e){},i=function(){},r=function(e){a=e.parent?e:null,d.dispatch(e)},s=function(e){t=a={icon:e,name:e,ids:[],children:[],depth:0}},l=function(){return t},c=new e.Signal,d=new e.Signal;return{filter:l,add:n,remove:o,removeAll:i,select:r,onChange:c,onSelect:d,get:l,set:s}}this.getUser=function(){return{name:"",password:"",domain:{name:"Guest"},authenticated:!1,token:null}},this.setDatasource=function(e){this.patientFilters.set(e)},this.patientFilters=a(),this.geneFilters=a()}e.$inject=["signals","osApi"],angular.module("oncoscape").service("osState",e)}(),function(){"use strict";function e(e,t,a,n,o){var i={},r=1,s=function(){return 9999==r&&(r=1),r++},l=new e("http://"+o+"/oncoscape","",{debug:!0,devel:!0});l.onmessage=function(e){var t=angular.fromJson(e.data);if(angular.isDefined(i[t.cmd])){var a=i[t.cmd];delete i[t.cmd],a.resolve(t)}else n.error("Unhandled message: %o",t)};var c=function(e){e.callback=s(),e.status="request",e.payload=e.payload||"";var t=a.defer();return i[e.callback]=t,0===l.readyState?l.onopen=function(){l.send(angular.toJson(e))}:l.send(angular.toJson(e)),t.promise.then(function(t){return e.response=t,t})};return{request:c}}e.$inject=["SockJS","$rootScope","$q","$log","domain"],angular.module("oncoscape").factory("osSocket",e)}(),function(){"use strict";function e(e,t){function a(e){var a={method:"POST",url:"/login/",data:{username:e.name,password:e.password,domain:e.domain.name}};return t(a).then(function(t){t.data.success?(e.authenticated=!0,e.token=t.data.token):(e.authenticated=!1,e.token=null)})}function n(e){return e?angular.element(".loader-modal").show():angular.element(".loader-modal").hide(),o}function o(){}function i(){return[{name:"Guest"},{name:"FHCRC"},{name:"SCCA"}]}function r(t){return e.request({cmd:"specifyCurrentDataset",payload:t})}function s(){return e.request({cmd:"getDataSetNames"})}function l(t){return e.request({cmd:"getDataManifest",payload:t})}function c(t){return e.request({cmd:"getPatientHistoryTable",payload:{datasetName:t,durationFormat:"byYear"}})}function d(){}function p(){}function u(){return e.request({cmd:"getGeneSetNames"})}function g(){return e.request({cmd:"getSampleCategorizationNames"})}function m(t){return e.request({cmd:"getSampleCategorization",payload:t})}function h(t){return e.request({cmd:"getMarkersNetwork",payload:t})}function f(){}function v(){}function y(){}function b(){}function x(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPCA",payload:n})}function w(t){var a={genes:t};return e.request({cmd:"calculatePCA",payload:a})}function C(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPLSR",payload:n})}function k(t,a){var n={genes:t,factorCount:a.length,factors:a};return e.request({cmd:"calculatePLSR",payload:n})}function M(t){return t=t||["AgeDx","Survival"],e.request({cmd:"summarizePLSRPatientAttributes",payload:t})}function T(){}function S(){return e.request({cmd:"createTimelines"})}function P(){}function $(){return e.request({cmd:"getModuleModificationDate",payload:"gbmPathways"})}function A(){return e.request({cmd:"getPathway",payload:"g.gbmPathways.json"})}function D(t,a){return e.request({cmd:"get_mRNA_data",payload:{entities:t,features:a}})}function F(t,a){return e.request({cmd:"get_cnv_data",payload:{entities:t,features:a}})}function E(t,a){return e.request({cmd:"get_mutation_data",payload:{entities:t,features:a}})}this.setBusy=n,this.setBusyMessage=o,this.login=a,this.setDataset=r,this.showFilter=function(){angular.element("#filter-dropdown").slideDown()},this.hideFilter=function(){angular.element("#filter-dropdown").slideUp()},this.getDomains=i,this.getDataSetNames=s,this.getDataManifest=l,this.getPatientHistoryTable=c,this.getPatientHistoryDxAndSurvivalMinMax=d,this.getSampleDataFrame=p,this.getGeneSetNames=u,this.getSampleCategorizationNames=g,this.getSampleCategorization=m,this.getMarkersNetwork=h,this.getPathway=A,this.getDrugGeneInteractions=f,this.getCanonicalizePatientIDsInDataset=v,this.getGeneSetGenes=y,this.getOncoprintDataSelection=b,this.getPCA=x,this.getCalculatedPCA=w,this.getPLSR=C,this.getCalculatedPLSR=k,this.getSummarizedPLSRPatientAttributes=M,this.getCalculatedSurvivalCurves=T,this.getTimelines=S,this.getCalculatedTimelines=P,this.getMrnaData=D,this.getCnvData=F,this.getMutationData=E,this.getModuleModificationDate=$}e.$inject=["osSocket","$http"],angular.module("oncoscape").service("osApi",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){var i=this;i.dataset=o.datasource||"DEMOdz",i.colnames=[],i.rows=[],i.search="",i.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var r;e.setBusy(!0),e.getDataManifest(i.dataset).then(function(t){i.colnames=t.payload.colnames,i.rows=t.payload.mtx,a(function(){r=angular.element("#metadata-datatable").dataTable({paging:!1}),n.$watch("vm.search",function(){r.api().search(i.search).draw()}),e.setBusy(!1)},0,!1)})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/metadata/metadata.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMetadata",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,r,s){var l={darkblue:"rgb(5, 108, 225)",blue:"rgb(19, 150, 222)",black:"black",white:"white",red:"red",purple:"rgb(56, 52,123)",gray:"#CCC"},c=[{selector:"node",style:{"background-color":l.black,"border-opacity":1,"border-color":l.red,"border-width":"0px",height:"20px",width:"20px",label:" data(id)","text-halign":"right","text-valign":"center","text-background-color":l.white,"text-background-opacity":".8","text-background-shape":"roundrectangle","font-size":"0px"}},{selector:'node[nodeType="patient"]',style:{"background-color":l.blue,height:"50px",width:"50px"}},{selector:"edge",style:{"line-color":l.gray,"line-style":"solid",width:"3px",display:"none"}},{selector:'edge[edgeType="chromosome"]',style:{"line-color":l.darkblue,display:"element"}},{selector:'node[nodeType="gene"]',style:{"border-color":l.blue,"border-width":"3px","background-color":l.white,height:"mapData(degree, 0, 50, 10.0, 80.0)",width:"mapData(degree, 0, 50, 10.0, 80.0)"}},{selector:'node[nodeType="patient"]:selected',style:{"background-color":l.red,width:"100px",height:"100px",shape:"diamond"}}],d=function(e,t){var a=function(){var e=new r.Signal,t=new r.Signal,a=new r.Signal,n=new r.Signal,o=new r.Signal,i=new r.Signal,s=function(){e.removeAll(),t.removeAll(),n.removeAll(),o.removeAll(),a.removeAll(),i.removeAll()},l=function(t){e.add(t),n.add(t)},c=function(e){t.add(e),o.add(e)},d=function(e){a.add(e),i.add(e)};return{geneOver:e,geneOut:t,geneClick:a,patientOver:n,patientOut:o,patientClick:i,over:l,out:c,click:d,removeAll:s}}();e.on("click",'node[nodeType="gene"]',a.geneClick.dispatch).on("click",'node[nodeType="patient"]',a.patientClick.dispatch).on("mouseover",'node[nodeType="gene"]',a.geneOver.dispatch).on("mouseover",'node[nodeType="patient"]',a.patientOver.dispatch).on("mouseout",'node[nodeType="gene"]',a.geneOut.dispatch).on("mouseout",'node[nodeType="patient"]',a.patientOut.dispatch);var o=[{name:"None",register:function(){},unregister:function(){}},{name:"Show All Edges",register:function(){a.over(function(e){"patient"==e.cyTarget.data().nodeType&&n.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),e.cyTarget.style({"font-size":"100px"}),e.cyTarget.animate({style:{"border-width":150}},{duration:300}),e.cyTarget.neighborhood("node").style({"font-size":"70px"})}),a.out(function(e){n.$apply(function(){t.patient=t.patientChromosomes=null}),e.cyTarget.style({"font-size":"0px"}),e.cyTarget.animate({style:{"border-width":0}},{duration:100}),e.cyTarget.neighborhood("node").style({"font-size":"0px"})}),e.$('edge[edgeType!="chromosome"]').style({display:"element"})},unregister:function(){a.removeAll(),e.$('edge[edgeType!="chromosome"]').style({display:"none"})}},{name:"One Degree",register:function(){a.click(function(e){var a=t.datasource;if(a.indexOf(!1)){var o=a.substr(4)+"_tcga",i=e.cyTarget.neighborhood("node").map(function(e){return e.data().name}).join("+"),r="http://www.cbioportal.org/ln?cancer_study_id="+o+"&q="+i;n.$apply(function(){s.open(r)})}}),a.over(function(e){"patient"==e.cyTarget.data().nodeType&&n.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),e.cyTarget.style({height:"60px",width:"60px","font-size":"100px"}),e.cyTarget.neighborhood("node").style({"font-size":"70px"}),e.cyTarget.neighborhood("edge").style({display:"element"})}),a.out(function(e){n.$apply(function(){t.patient=t.patientChromosomes=null}),e.cyTarget.style({"font-size":"0px"}),e.cyTarget.neighborhood("node").style({"font-size":"0px"}),e.cyTarget.neighborhood("edge").style({display:"none"})})},unregister:function(){a.removeAll()}},{name:"Two Degrees",register:function(){a.over(function(e){"patient"==e.cyTarget.data().nodeType&&n.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),e.cyTarget.style({height:"60px",width:"60px","font-size":"100px"}),e.cyTarget.neighborhood("node").neighborhood("edge").style({"line-style":"dashed",display:"element"}),e.cyTarget.neighborhood("edge").style({"line-style":"solid"})}),a.out(function(e){n.$apply(function(){t.patient=t.patientChromosomes=null}),e.cyTarget.style({"font-size":"0px"}),e.cyTarget.neighborhood("node").neighborhood("edge").style({"line-style":"solid",display:"none"})})},unregister:function(){a.removeAll()}}];return n.$watch("vm.optInteractiveMode",function(e,t){t.unregister(),e.register()}),o},p=function(e,t,a){var n=function(n){e.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"}),a.getSampleCategorization(n.name).then(function(a){t.legandNodes=a.payload.tbl.map(function(e){return e[0]+"|"+e[1]}).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){var t=e.split("|");return{name:t[0],color:t[1]}}),e.$('node[nodeType="patient"]').forEach(function(e){for(var t=e.data().id,a=0;a<this.rownames.length;a++)if(t===this.rownames[a]){e.style({"background-color":this.tbl[a][1]});break}},a.payload)})};a.getSampleCategorizationNames().then(function(e){t.optNodeColors=t.optNodeColors.concat(e.payload.map(function(e){return{name:e,fn:n}}))}),t.legandNodes=[{name:"Patients",color:"#3993fa"}];var o=[{name:"Default",fn:function(){t.legandNodes=[{name:"Patients",color:"#3993fa"}],e.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"})}},{name:"Gender",fn:function(){t.legandNodes=[{name:"Male",color:"blue"},{name:"Female",color:"pink"}],e.$('node[nodeType="patient"]').forEach(function(e){e.data().patient&&e.style({"background-color":"male"===e.data().patient[2]?"rgb(5, 108, 225)":"female"===e.data().patient[2]?"pink":"black"})})}},{name:"Age At Diagnosis",fn:function(){t.legandNodes=[{name:"Young",color:"green"},{name:"Old",color:"red"}],e.$('node[nodeType="patient"]').forEach(function(e){if(e.data().patient){var t=e.data().patient[4];e.style({"background-color":"rgb("+255*t/100+","+255*(100-t)/100+",0)"})}})}}];return t.optNodeColor=o[0],o},u=function(e){var t=function(t){var a=angular.element("."+t["class"]);switch(t.state){case"Visible":t.state="Highlight",a.css("border-color",t.color),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":t.color,width:"5px"});break;case"Hidden":t.state="Visible",a.css("border-color",l.gray),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":"#CCC",width:"5px"});break;default:t.state="Hidden",a.css("border-color",l.white),e.$('edge[edgeType="'+t.name+'"]').style({width:"0px"})}},n=[{name:"mutation","class":"edgeMutation",color:"#004358",state:"Highlight",fn:t},{name:"cnGain.1","class":"edgeCnGain1",color:"#1F8A70",state:"Highlight",fn:t},{name:"cnLoss.1","class":"edgeCnLoss1",color:"#BEDB39",state:"Highlight",fn:t},{name:"cnGain.2","class":"edgeCnGain2",color:"#FFE11A",state:"Highlight",fn:t},{name:"cnLoss.2","class":"edgeCnLoss2",color:"#FD7400",state:"Highlight",fn:t}];return a(function(){n.forEach(function(t){angular.element("."+t["class"]).css("border-color",t.color),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":t.color,width:"5px"})})}),n},g=function(e,t){var a=[{name:"Hobo",fn:function(a){t.optPatientLayout=a,e.$('node[nodeType="patient"]').forEach(function(e){e.position(e.data().pos)})}},{name:"Age At Diagnosis",fn:function(a){t.optPatientLayout=a,e.$('node[nodeType="patient"]').forEach(function(e){e.data().patient&&e.position({x:500,y:60*e.data().patient[4]-3e3})})}},{name:"Gender",fn:function(a){t.optPatientLayout=a;var n=1e3,o=1e3;e.$('node[nodeType="patient"]').forEach(function(e){e.data().patient&&("male"==e.data().patient[2].toLowerCase()?e.position({x:n-=50,y:500}):e.position({x:o-=50,y:-500}))})}}];return t.optPatientLayout=a[0],a},m=this;m.datasource=o.datasource||"DEMOdz",m.optInteractiveModes,m.optInteractiveMode,m.optPatientLayouts,m.optPatientLayout,m.optNodeColors,m.optNodeColor,m.optEdgeColors,m.legandNodes,m.legandPatient,m.legandChromosomes,m.frame,m.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var h,f=angular.element("#markers-chart"),v={patient:null,markers:null};e.setBusy(!0),e.setDataset(m.datasource).then(function(){e.getPatientHistoryTable(m.datasource).then(function(t){v.patient=t.payload,e.getMarkersNetwork(t.payload).then(function(t){v.markers=angular.fromJson(t.payload),v.markers.elements.nodes.filter(function(e){return"patient"===e.data.nodeType}).map(function(e){e.data.pos={x:e.position.x,y:e.position.y},e.data.patient=v.patient.tbl.filter(function(t){return t[0]===e.data.id})[0]}),h=i({container:f,elements:v.markers.elements,style:c,layout:{name:"preset",fit:!0}}),m.optPatientLayouts=g(h,m),m.optEdgeColors=u(h,m,a),m.optNodeColors=p(h,m,e),m.optInteractiveModes=d(h,m,n),m.optInteractiveMode=m.optInteractiveModes[0],e.setBusy(!1)})})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams","cytoscape","signals","$window"];var t={restrict:"E",templateUrl:"app/components/markers/markers.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMarkers",e)}(),function(){"use strict";function e(){function e(e,t,a){var n=this;n.domains=e.getDomains(),n.user=t.getUser(),n.hasError=!1,n.login=function(){e.login(n.user).then(function(){n.user.authenticated?a.go("datasource"):n.hasError=!0})}}e.$inject=["osApi","osState","$state"];var t={restrict:"E",templateUrl:"app/components/login/login.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLogin",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/loader/loader.html",replace:!0};return e}angular.module("oncoscape").directive("osLoader",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.login=function(){e.go("login")}}e.$inject=["$state"];var t={restrict:"E",templateUrl:"app/components/landing/landing.html",replace:!0,controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLanding",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i){function r(e){var t;if(0===e.depth)t=s.tbl;else{var a=e.ids,n=a.length;t=s.tbl.filter(function(e){for(var t=e[0],o=0;n>o;o++)if(t===a[o])return!0;return!1})}var o=t.map(function(e){return e[4]}),i=t.map(function(e){return e[3]});l.diagnosisMin=l.diagnosisMinValue=Math.floor(Math.min.apply(null,o)),l.diagnosisMax=l.diagnosisMaxValue=Math.ceil(Math.max.apply(null,o)),l.survivalMin=l.survivalMinValue=Math.floor(Math.min.apply(null,i)),l.survivalMax=l.survivalMaxValue=Math.floor(Math.max.apply(null,i)),c.fnClearTable(),c.fnAddData(t)}var s,l=this;l.datasource=i.datasource||"DEMOdz",null==t.patientFilters.get()&&t.patientFilters.set(l.datasource),l.colnames=[],l.rows=[],l.diagnosisMin=l.diagnosisMinValue=1,l.diagnosisMax=l.diagnosisMaxValue=99,l.survivalMin=l.survivalMinValue=0,l.survivalMax=l.survivalMaxValue=10,l.search="",l.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},l.applyFilter=function(){angular.element.fn.DataTable.ext.search=[function(e,t){var a=parseFloat(t[3]),n=parseFloat(t[4]);return isNaN(a)||isNaN(n)?!1:n>=l.diagnosisMin&&n<=l.diagnosisMax&&a>=l.survivalMin&&a<=l.survivalMax}],c.api().draw()},l.cohort,l.createCohort=function(){t.patientFilters.add({icon:"history",name:l.cohort,ids:c._("tr",{filter:"applied"}).map(function(e){return e[0]})})},t.patientFilters.onSelect.add(r);var c;e.setBusy(!0),e.setDataset(l.datasource).then(function(){
e.getPatientHistoryTable(l.datasource).then(function(t){s=t.payload,l.colnames=s.colnames,l.rows=s.tbl,n(function(){c=angular.element("#history-datatable").dataTable({scrollY:"70vh",paging:!1}),o.$watch("vm.search",function(){c.api().search(l.search).draw()}),e.setBusy(!1)},0,!1)})})}e.$inject=["osApi","osState","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/history/history.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHistory",e)}(),function(){"use strict";function e(){function e(e,t,a,n){var o=this;o.datasource=a.datasource||"DEMOdz",o.toolsClick=function(){n.go("tools",{datasource:o.datasource})},o.cohortClick=function(){e.showFilter()}}e.$inject=["osApi","osState","$stateParams","$state"];var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHeader",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/footer/footer.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFooter",e)}(),function(){"use strict";function e(){function e(e,t,a,n){function o(e){var a=d.nodes(e).reverse(),n=d.links(a);a.forEach(function(e){e.y=150*e.depth});var o=u.selectAll("g.node").data(a,function(e){return e.id||(e.id=++c)}),i=o.enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.y+","+e.x+")"}).on("click",function(e){t.patientFilters.select(e)});i.append("circle").attr("r",function(e){return null==e.parent?50:35}),i.append("text").attr("x",function(e){return 0}).attr("y",function(e){return 30}).text(function(e){return e.name}).attr("text-anchor","middle").attr("font-size","20px").attr("fill","#59a5fb"),i.append("image").attr("xlink:href",function(e){return"./assets/images/datasets/"+e.icon+".png"}).attr("x",function(e){return null==e.parent?-50:-35}).attr("y",function(e){return null==e.parent?-50:-35}).attr("width",function(e){return null==e.parent?100:70}).attr("height",function(e){return null==e.parent?100:70}).style("display",function(e){return null==e.icon?"none":null});var r=u.selectAll("path.link").data(n,function(e){return e.target.id});r.enter().insert("path","g").attr("class","link").style("stroke","#3993fa").attr("d",p)}var i=this;i.datasource=a.datasource||"DEMOdz",null==t.patientFilters.get()&&t.patientFilters.set(i.datasource),i.close=function(){e.hideFilter()},t.patientFilters.onChange.add(function(){e.showFilter(),o(t.patientFilters.get())});var r={top:20,right:20,bottom:30,left:40},s=1e3-r.left-r.right,l=250-r.top-r.bottom,c=0,d=n.layout.tree().size([l,s]),p=n.svg.diagonal().projection(function(e){return[e.y,e.x]}),u=n.select("#filters-chart").append("svg").attr("width",s+r.right+r.left).attr("height",l+r.top+r.bottom).append("g").attr("transform","translate(400,"+r.top+")");o(t.patientFilters.get())}e.$inject=["osApi","osState","$stateParams","d3"];var t={restrict:"E",templateUrl:"app/components/filters/filters.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFilters",e)}(),function(){"use strict";function e(){function e(e,t,a){var n=this;n.datasets=[],n.explore=function(e,n){a.setDatasource(n),t.go(e,{datasource:n})},e.setBusy(!0),e.getDataSetNames().then(function(t){n.datasets=t.payload.datasets,e.setBusy(!1)})}e.$inject=["osApi","$state","osState"];var t={restrict:"E",templateUrl:"app/components/datasource/datasource.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osDatasource",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/compare/compare.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osCompare",e)}(),function(){"use strict";function e(e,t){t.$on("$stateChangeStart",function(){angular.element.fn.DataTable.ext.search=[]}),e.debug("runBlock end")}e.$inject=["$log","$rootScope"],angular.module("oncoscape").run(e)}(),function(){"use strict";function e(e,t){e.state("landing",{url:"/",template:"<os-landing>"}).state("login",{url:"/login",template:"<os-login>"}).state("datasource",{url:"/datasource",template:"<os-datasource>"}).state("tools",{url:"/tools/{datasource}",template:"<os-tools>"}).state("metadata",{url:"/metadata/{datasource}",template:"<os-metadata>"}).state("history",{url:"/history/{datasource}",template:"<os-history>"}).state("plsr",{url:"/plsr/{datasource}",template:"<os-plsr>"}).state("pca",{url:"/pca/{datasource}",template:"<os-pca>"}).state("markers",{url:"/markers/{datasource}",template:"<os-markers>"}).state("pathways",{url:"/pathways/{datasource}",template:"<os-pathways>"}).state("timelines",{url:"/timelines/{datasource}",template:"<os-timelines>"}).state("compare",{url:"/compare/{datasource}",template:"<os-compare>"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("oncoscape").config(e)}(),function(){"use strict";angular.module("oncoscape").constant("d3",d3).constant("cytoscape",cytoscape).constant("signals",signals).constant("SockJS",SockJS).constant("domain",document.domain).constant("$",$)}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig"],angular.module("oncoscape").config(e)}(),angular.module("oncoscape").run(["$templateCache",function(e){e.put("app/components/datasource/datasource.html",'<section class="datasource"><div class="container"><div class="row"><h2>Data Sources</h2><p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p></div><div class="row"><ul><li ng-repeat="dataset in vm.datasets" class="col-md-6"><img ng-src="/assets/images/datasets/{{dataset}}.png"><h2>{{dataset}}</h2><p>Lorem ipsum dolor sit amet, cras eu mollis vivamus iv, ad sollicitudin rhoncus dui proin fort numa sar.</p><nobr><a href="" ng-click="vm.explore(\'tools\',dataset)">Explore</a> &nbsp;|&nbsp; <a href="" ng-click="vm.explore(\'metadata\',dataset)">Learn More</a></nobr></li></ul></div></div><br><br></section>'),e.put("app/components/compare/compare.html",'<section class="compare-v50"><os-plsr></os-plsr></section><section class="compare-v50"><os-pca></os-pca></section>'),e.put("app/components/filters/filters.html",'<section id="filter-dropdown" class="filters container"><div class="filters-tree" id="filters-chart"></div><button class="btn btn-primary" ng-click="vm.close()" style="position: absolute; bottom:0px; left:50%;border-radius: 0px;">Close Cohort Panel</button><div class="nav-divider" style="min-height:3px;"></div></section>'),e.put("app/components/footer/footer.html",'<footer class="footer container"><div class="row"><div class="col-xs-12 col-sm-6"><img class="footer-logo" src="/assets/images/logo-fred-hutchinson-cancer-research-center.png" alt="Fred Hutchinson Cancer Research Center"> <img class="footer-logo" src="/assets/images/logo-university-of-washington-medicine.png" alt="UW Medicine"> <img class="footer-logo" src="/assets/images/logo-seattle-cancer-care-alliance.png" alt="Seattle Cancer Care Alliance"></div><div class="col-xm-12 col-sm-6 text-right"><a href="https://www.facebook.com/STTRCancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-facebook-out.png" alt="Facebook"></a> <a href="https://twitter.com/sttrcancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-twitter-out.png" alt="Twitter"></a> <a href="https://plus.google.com/+fredhutch/videos" target="_blank"><img class="footer-icon" src="/assets/images/sttr-youtube-out.png" alt="YouTube"></a> <a href="http://instagram.com/FredHutch" target="_blank"><img class="footer-icon" src="/assets/images/sttr-instagram-out.png" alt="Instagram"></a> <a href="http://www.linkedin.com/company/fred-hutchinson-cancer-research-center/careers?trk=top_nav_careers" target="_blank"><img class="footer-icon" src="/assets/images/sttr-linkedin-out.png" alt="LinkedIn"></a> <a href="https://plus.google.com/116048577052683099154/posts" target="_blank"><img class="footer-icon" src="/assets/images/sttr-google-out.png" alt="Google+"></a></div></div></footer>'),e.put("app/components/header/header.html",'<nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img alt="Brand" src="/assets/images/logo.png" style="max-height:50px;"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="" ng-click="vm.toolsClick()"><span class="glyphicon glyphicon-signal"></span>Tools</a></li><li><a href="" ng-click="vm.cohortClick()"><span class="glyphicon glyphicon-th"></span>Cohorts</a></li><li><a href="#datasource"><span class="glyphicon glyphicon-equalizer"></span>Data Sources</a></li><li><a href="#datasource"><span class="glyphicon glyphicon-user"></span>Account</a></li><li><a href="#datasource"><span class="glyphicon glyphicon-question-sign"></span>Help</a></li></ul></div></div></nav>'),e.put("app/components/history/history.html",'<section class="history container container-filters"><h2>Patient History ({{vm.datasource}})</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Age At diagnosis</label><div range-slider="" min="vm.diagnosisMinValue" model-min="vm.diagnosisMin" max="vm.diagnosisMaxValue" model-max="vm.diagnosisMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMin" max="vm.survivalMaxValue" model-max="vm.survivalMax" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-3" style="padding-right:20px"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width: 100%;" ng-model="vm.search"></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="history container" style="padding-top:20px;"><table id="history-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),e.put("app/components/landing/landing.html",'<div class="landing container"><div class="row" style="padding-top:20px;"><h2>Bridging Cancer Research and Clinical Care</h2></div><div class="row" style="padding-top:20px;"><div class="col-sm-8"><p>Oncoscape is developed at the Fred Hutchinson Cancer Research Center under the auspices of the Solid Tumor Translational Research initiative. Oncoscape is a web-based, menu-driven analysis and visualization platform for large-scale, heterogeneous clinical and molecular patient timeline data as exemplified by the Fred Hutch HIDRA database. Oncoscape was conceived, and is managed, by a Steering Committee comprising: <a href="https://www.fredhutch.org/en/labs/profiles/holland-eric.html">Eric Holland</a>, <a href="http://www.sttrcancer.org/en/contact-us/horse-grant-bio.html">Desert Horse-Grant</a>, <a href="https://www.fredhutch.org/en/diseases/featured-researchers/fearn-paul.html">Paul Fearn</a>, <a href="https://www.linkedin.com/in/paul-shannon-a9478166">Paul Shannon</a>, <a href="https://www.linkedin.com/in/lisa-mcferrin-9758b029">Lisa McFerrin</a>, and <a href="https://www.linkedin.com/in/hbolouri">Hamid Bolouri</a>.</p><p class="">Through its easy point-and-click browser interface, Oncoscape will become an essential tool for doctors and researchers interested in:</p><ul class=""><li>Comparing patients or populations across an array of features, like genetic alterations (CNV, IHC, sequencing, expression) or clinical elements (treatment regimens, diagnostics, outcomes)</li><li>Defining cohorts based on selected traits – identifying “patients like me”</li><li>Aligning patient histories according to timeline events: diagnosis, treatment, progression, survival</li><li>Performing powerful and integrated statistical analysis: Principle Component Analysis, Partial least squares regression, Kaplan-Meier curves, enrichment scores</li><li>Creating high quality visualizations of molecular/clinical data</li></ul><p class="">By providing a portal equipped with rich data, powerful statistics and a simple interface, Oncoscape not only empowers users to quickly answer questions themselves but also expedites the process of discovering novel patterns and relationships. This can lead to numerous possible findings, including optimized drug therapies for individual patients, identification of novel regulatory pathways, or even the need to reassess adherence strategies.</p></div><div class="col-sm-4"><os-login></os-login></div></div></div>'),e.put("app/components/loader/loader.html",'<div class="loader-modal"><div class="loader"><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__ball"></div></div></div>'),e.put("app/components/login/login.html",'<form class="login"><h3 class="login-header">Login</h3><div class="login-body"><div class="alert alert-danger" role="alert" ng-show="vm.hasError"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span class="sr-only">Error:</span> Invalid Credentials</div><fieldset class="form-group"><span for="domain" class="small">Affiliation</span><select id="domain" class="form-control" ng-options="option.name for option in vm.domains track by option.name" ng-model="vm.user.domain"></select></fieldset><fieldset class="form-group"><span class="form-control-label small" for="username">Username</span> <input id="username" class="form-control input-sm" type="text" placeholder="Username" ng-model="vm.user.name"></fieldset><fieldset class="form-group" ng-show="vm.user.domain.name!=\'Guest\'"><span class="form-control-label small" for="password">Password</span> <input id="password" class="form-control" type="password" placeholder="Password" ng-model="vm.user.password"></fieldset><button class="btn btn-default" ng-click="vm.login()">Login</button></div></form>'),e.put("app/components/markers/markers.html",'<section class="markers container container-filters"><h2>Markers + Patients ({{vm.datasource}})</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Interactive Mode</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optInteractiveMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optInteractiveModes" ng-click="vm.optInteractiveMode=item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Layout Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optPatientLayout.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patient Distribution</li><li ng-repeat="item in vm.optPatientLayouts" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item)">{{item.name}}</label></li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Color Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Patients + Edges <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patients Colors</li><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item);"> {{item.name}}</label></li><li><hr></li><li style="padding:5px;font-weight:600;">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</button></li></ul></div></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="markers-chart" class="markers container-fluid container-content"></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><div class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Node Colors</li><li ng-repeat="item in vm.legandNodes"><div class="circle {{item.color}}"></div>{{item.name}}</li><li><hr></li><li style="padding:5px;font-weight:600;">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</button></li></ul><ul class="legand" ng-if="vm.patient"><li><hr></li><li style="padding:5px;font-weight:600;">Patient Information</li><li>PID: {{vm.patient[0]}}</li><li>SID: {{vm.patient[1]}}</li><li>GENDER: {{vm.patient[2]}}</li><li>STATUS: {{vm.patient[6]}}</li><li>DIAGNOSED: {{vm.patient[4]}} years old</li><li>SURVIVED: {{vm.patient[3]}} years</li><li>PROGRESSION: {{vm.patient[5]}}</li><li><hr></li><li style="padding:5px;font-weight:600;">Genes ({{vm.patientChromosomes.length}})</li><li><span ng-repeat="item in vm.patientChromosomes">{{item}} |</span></li></ul></div>'),e.put("app/components/metadata/metadata.html",'<section class="metadata container container-filters"><h2>Metadata ({{vm.dataset}})</h2><div class="row"><div class="col-xs-9" style="padding-right: 60px;">{{vm.dataset}} raw data was provided by <a href="http://cancergenome.nih.gov/">The Cancer Genome Atlas</a> on MM/DD/YYY. Processing of data was conducted by the <a href="http://www.sttrcancer.org/en.html">Solid Tumor Translational Research Organization</a> in conjuntion with the <a href="http://www.fhcrc.org">Fred Hutchinson Cancer Research Center</a>, <a href="http://www.uwmedicine.org/">UW Medicine</a> and <a href="http://www.scca.org">The Seattle Cancer Care Alliance</a>. For information on variables, units and summary choices review the <a>Code Books</a>.</div><div class="col-xs-3" style="margin: 10px 0 30px;"><label>Search</label> <input type="text" class="ngrs-range-slider ngrs-range-slider-no-pad" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="metadata container" style="padding-top:20px;"><table id="metadata-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),e.put("app/components/pathways/pathways.html",'<section class="pathways container container-filters"><h2>Pathways ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div><div class="col-xs-4"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="gbm-chart" class="gbm container-fluid container-content"></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Legend</li><li style="border:0px solid green; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Activation</li><li style="border:0px solid red; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Inhibition</li><li style="border:0px solid #38347B; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Modification</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Genes</li></ul><ul class="legand" ng-if="vm.tip"><li><hr></li><li style="padding:5px;font-weight:600;">Tip</li><li>View {{vm.tip}}</li></ul></section>'),e.put("app/components/plsr/plsr.html",'<section class="plsr container container-filters"><h2>Partial Least Squares Regression ({{vm.datasource}})</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Age At Diagnosis</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-3"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="plsr-chart" class="plsr container-fluid container-content"></section><div class="modal fade pathways" id="plsr-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Legend</li><li style="border:0px solid #1396de; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Age At Diagnosis</li><li style="border:0px solid #38347b; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Survival</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Genes</li></ul></section>'),e.put("app/components/pca/pca.html",'<section class="pca container container-filters"><h2>Principal Component Analysis ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-4" style="padding-right:20px;"><label>Color Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Patients Colors <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item);"> {{item.name}}</label></li></ul></div></div><div class="col-xs-4"><label>Create Cohort</label><div class="input-group"><input type="text" class="form-control" placeholder="Cohort Name" style="height:29px;" ng-model="vm.cohort"> <span class="input-group-btn"><button class="btn btn-primary" type="button" style="height:29px;" ng-click="vm.createCohort()">Go!</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="pca-chart" class="pca container-fluid" style="margin:50px 100px;height: 60vh"></section><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Legend</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Patients</li><li><hr></li><li style="padding:5px;font-weight:600;">Proportion of Variance</li><li>PC1: {{vm.pc1*100}}%</li><li>PC2: {{vm.pc2*100}}%</li></ul></section>'),e.put("app/components/timelines/timelines.html",'<section class="timelines container container-filters"><h2>Timelines ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="timelines-chart" class="timelines container-fluid container-content"></section><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Events</li><li style="border:0px solid green; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Birth</li><li style="border:0px solid red; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Encounter</li><li style="border:0px solid #38347B; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Diagnosis</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Procedure</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Pathology</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Radiation</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Drug</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Progression</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Status</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Absent</li></ul></section>'),e.put("app/components/tools/tools.html",'<section class="datasource"><div class="container"><div class="row"><h2>Tools ({{vm.datasource}})</h2><p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p></div><div class="row"><ul><li ng-repeat="tool in vm.tools" class="col-sm-6"><img ng-src="/assets/images/datasets/{{tool.img}}"><h2>{{tool.name}}</h2><p>Lorem ipsum dolor sit amet, cras eu mollis vivamus, ad sollicitudin rhoncus dui proin.</p><a href="" ng-click="vm.explore(tool.route, vm.datasource)">Explore</a></li></ul></div></div></section>')}]);
//# sourceMappingURL=../maps/scripts/app-51ca9c1be7.js.map
