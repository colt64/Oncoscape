!function(){"use strict";angular.module("oncoscape",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","ui-rangeSlider","toastr"])}(),function(){"use strict";function e(){function e(e,t){var a=this;a.tools=[{name:"Markers + Patients",route:"markers",img:"markers.png"},{name:"Pathways",route:"pathways",img:"pathways.png"},{name:"Partial Least Squares Regression (PLSR)",route:"plsr",img:"plsr.png"},{name:"Principal Components Analysis (PCA)",route:"pca",img:"pca.png"},{name:"Patient History",route:"history",img:"history.png"},{name:"MetaData",route:"metadata",img:"MetaData.png"},{name:"Timelines",route:"timelines",img:"tool.png"}],a.explore=function(e,a){t.go(e,{datasource:a})}}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/tools/tools.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTools",e)}(),function(){"use strict";function e(){function e(e,t,a){var n=this;n.datasource=a.datasource||"DEMOdz",n.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},e.setBusy(!0)("Loading Dataset"),e.setDataset(n.datasource).then(function(){e.getTimelines().then(function(){e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams"];var t={restrict:"E",templateUrl:"app/components/timelines/timelines.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osTimelines",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i){var r=this;r.datasource=a.datasource||"DEMOdz",r.deathMinFilter=r.deathMinValue=45,r.deathMaxFilter=r.deathMaxValue=66,r.survivalMinFilter=r.survivalMinValue=3,r.survivalMaxFilter=r.survivalMaxValue=7,r.geneSets=[],r.geneSet=null,r.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},r.update=function(){c(!0)};var s=angular.element("#plsr-chart"),l=function(){function e(e,t,r){try{n.remove()}catch(s){}try{a.remove()}catch(s){}var u,g,m=-1*e;u=i.scale.linear().domain([m,e]).range([0,l]),g=i.scale.linear().domain([m,e]).range([c,0]),o=d.selectAll("text").data(t).enter().append("text").attr("class","text").attr("x",function(e){return u(e[0])}).attr("y",function(e){return g(e[1])}).text(function(e){return e.name}).attr("text-anchor",function(e){var t=e[0]>0?"start":"end";return t}).style("fill","black"),a=d.selectAll("line").data(t).enter().append("line").attr("class","line").style("stroke-width",3).style("stroke",function(e){return e.name.indexOf("Age")?"#1396de":"#38347b"}).attr("x1",u(0)).attr("y1",g(0)).attr("x2",function(e){return u(e[0])}).attr("y2",function(e){return g(e[1])}),n=d.selectAll("circle").data(r).enter().append("circle").attr("cx",function(e){return u(e[0])}).attr("cy",function(e){return g(e[1])}).attr("r",function(){return 3}).style("fill","black").on("mouseover",function(e){var t=i.mouse(this);p.text(e.name).style("top",t[1]+160+"px").style("left",t[0]+10+"px").style("visibility","visible")}).on("mousemove",function(){var e=i.mouse(this);p.style("top",e[1]+160+"px").style("left",e[0]+10+"px")}).on("mouseout",function(){return p.style("visibility","hidden")})}function t(e,t,r){o.data(t).transition().duration(900).attr("x",function(e){return xScale(e[0])}).attr("y",function(e){return yScale(e[1])}),a.data(t).transition().duration(900).attr("x1",xScale(0)).attr("y1",yScale(0)).attr("x2",function(e){return xScale(e[0])}).attr("y2",function(e){return yScale(e[1])}),n.data(r).transition().duration(900).each("start",function(){i.select(this)}).delay(function(e,t){return t/r.length*500}).attr("cx",function(e){return xScale(e[0])}).attr("cy",function(e){return yScale(e[1])}).each("end",function(){i.select(this).transition().duration(500).style("fill","black").attr("r",3)})}var a,n,o,r={top:20,right:20,bottom:30,left:40},l=s.width()-r.left-r.right,c=s.height()-r.top-r.bottom,d=i.select("#plsr-chart").append("svg").attr("id","chart").attr("width",l).attr("height",c),p=d.append("div").style("position","absolute").style("z-index","10").style("visibility","hidden");return{create:e,update:t}}("#plsr-chart");e.setBusy(!0)("Loading Dataset"),e.setDataset(r.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PLSR Matrix"),e.getPLSR(r.datasource,a).then(function(t){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(t){r.geneSets=t.payload,r.geneSet=r.geneSets[0],e.setBusyMessage("Loading Patients"),e.getSummarizedPLSRPatientAttributes().then(function(e){var t=e.payload;r.deathMinValue=Math.floor(t.AgeDx[0]/365.24),r.deathMaxValue=Math.floor(t.AgeDx[4]/365.24),r.survivalMinValue=Math.floor(t.Survival[0]/365.24),r.survivalMaxValue=Math.floor(t.Survival[4]/365.24),o.$watch("vm.geneSet",function(){c(!1)})})})})});var c=function(t){console.log("CALC PLSR"),e.setBusyMessage("Calculating PLSR");var a=[{name:"Survival",low:365.24*Number(r.survivalMinFilter),high:365.24*Number(r.survivalMaxFilter)},{name:"AgeDx",low:365.24*Number(r.deathMinFilter),high:365.24*Number(r.deathMaxFilter)}];e.getCalculatedPLSR(r.geneSet,a).then(function(a){e.setBusyMessage("Rendering PLSR");var n=a.payload,o=n.loadings.map(function(e,t,a){return e.name=n.loadingNames[t],e}),i=n.vectors.map(function(e,t,a){return e.name=n.vectorNames[t],e}),r=1.2*n.maxValue;t?l.update(r,i,o):l.create(r,i,o),e.setBusy(!1)})}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3"];var t={restrict:"E",templateUrl:"app/components/plsr/plsr.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPlsr",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i){var r=this;r.datasource=a.datasource||"DEMOdz",r.geneSets=[],r.geneSet=null,r.toggleFilter=function(){$(".container-filters").toggleClass("container-filters-collapsed"),$(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var s=$("#pca-chart"),l=i.select("#pca-chart");e.setBusy(!0)("Loading Dataset"),e.setDataset(r.datasource).then(function(t){var a=t.payload.rownames.filter(function(e){return e.indexOf("mtx.mrna")>=0});a=a[a.length-1].replace(".RData",""),e.setBusyMessage("Creating PCA Matrix"),e.getPCA(r.datasource,a).then(function(t){e.setBusyMessage("Loading Gene Sets"),e.getGeneSetNames().then(function(e){r.geneSets=e.payload,r.geneSet=r.geneSets[0],o.$watch("vm.geneSet",function(){c()})})})});var c=function(){e.setBusyMessage("Calculating PCA"),e.getCalculatedPCA(r.geneSet).then(function(t){e.setBusyMessage("Rendering PCA");var a=t.payload;r.pc1=t.payload["importance.PC1"],r.pc2=t.payload["importance.PC2"],d(a.scores),e.setBusy(!1)})},d=function(e){var t=70,a=s.width(),n=s.height();l.select("#chart").remove();var o=1.1*i.max(e,function(e){return+e[0]}),r=1.1*i.min(e,function(e){return+e[0]}),c=1.1*i.max(e,function(e){return+e[1]}),d=1.1*i.min(e,function(e){return+e[1]}),p=i.scale.linear().domain([r,o]).range([t,a-t]),u=i.scale.linear().domain([d,c]).range([n-t,t]),g=p(0),m=u(0),h=i.svg.axis().scale(p).orient("top").ticks(5),f=i.svg.axis().scale(u).orient("left").ticks(5),v=l.append("div").attr("data-toggle","tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden").text("a simple tooltip"),y=i.svg.brush().x(p).y(u).on("brushend",function(){var e=y.extent(),t=e[0][0],a=e[1][0];Math.abs(t-a);selectedIDs=identifyEntitiesInCurrentSelection()}),b=l.append("svg").attr("id","chart").attr("width",a).attr("height",n);b.append("g").attr("class","x axis").attr("transform","translate(0, "+m+")").style({stroke:"#1396de","stroke-width":"1px",fill:"none"}).call(h).append("text").style({"font-size":14,fill:"#1396de",stroke:"none"}).text("PC1"),b.append("g").attr("class","y axis").attr("transform","translate("+g+", 0)").style({stroke:"#1396de","stroke-width":"1px",fill:"none"}).call(f).append("text").attr("y",10).attr("dy",".71em").style({"font-size":14,fill:"#1396de",stroke:"none","text-anchor":"end"}).text("PC2"),b.append("g").selectAll("circle").data(e).enter().append("circle").attr("cx",function(e,t){return p(e[0])}).attr("cy",function(e,t){return u(e[1])}).attr("r",function(e){return 3}).style("fill","#000").on("mouseover",function(e,t){return v.text(currentIdentifiers[t]),v.style("visibility","visible")}).on("mousemove",function(){return v.style("top",i.event.pageY-10+"px").style("left",i.event.pageX+10+"px")}).on("mouseout",function(){return v.style("visibility","hidden")})}}e.$inject=["osApi","$state","$stateParams","$timeout","$scope","d3"];var t={restrict:"E",templateUrl:"app/components/pca/pca.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPca",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){function i(){var e="rgb(5, 108, 225)",t="red",a="rgb(56, 52,123)",n="green";return[{selector:"node",style:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"ellipse",width:"60px",height:"50px",color:e,"background-color":"rgb(250, 250, 250)","border-width":"2px","border-color":e}},{selector:"edge",style:{width:"2px","line-color":e,"line-style":"solid"}},{selector:'node[nodeType="class"], node[nodeType="family"], node[nodeType="complex"]',style:{content:"","background-color":"white",shape:"roundrectangle"}},{selector:'edge[edgeType="activates"], edge[edgeType="indirectly activates"]',style:{"line-color":n,"target-arrow-shape":"triangle","target-arrow-color":n}},{selector:'edge[edgeType="inhibits"], edge[edgeType="ubiquitinylates"]',style:{"line-color":t,"target-arrow-shape":"tee","target-arrow-color":t}},{selector:'edge[edgeType="fusion"]',style:{"line-color":n}},{selector:'edge[edgeType="contains"]',style:{display:"none"}},{selector:'node[nodeType="process"]',style:{}},{selector:"node:selected",style:{"overlay-opacity":"0.5","overlay-color":"red"}},{selector:'node[nodeType="rtk"]',style:{content:"data(label)","background-color":"rgb(224, 209, 178)","border-color":"black","border-width":"0px","font-size":"48px",shape:"roundrectangle",width:"40px",height:"160px"}},{selector:'node[nodeType="kinase"]',style:{content:"data(label)","background-color":"rgb(255, 206, 194)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="dimer"]',style:{content:"","background-color":"rgb(234, 219, 188)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="loop"]',style:{content:"","background-color":"rgb(255, 255, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px","border-style":"dotted"}},{selector:'node[nodeType="gtpase"]',style:{content:"data(label)","background-color":"rgb(194, 194, 255)",shape:"ellipse",width:"160px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="adaptor"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"120px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="GEF"]',style:{content:"data(label)","background-color":"rgb(77, 184, 255)",shape:"ellipse",width:"60px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="process"]',style:{content:"data(label)","background-color":"rgb(255, 255, 255)",shape:"roundrectangle",width:"100px",height:"40px","font-size":"24px","border-color":"black","border-width":"0px"}},{selector:'node[nodeType="TF"]',style:{content:"data(label)","background-color":"rgb(255, 206, 94)",shape:"diamond",width:"160px",height:"60px","font-size":"48px","border-color":"black","border-width":"1px"}},{selector:'node[nodeType="gene fusion"]',style:{content:"data(label)",shape:"roundrectangle","font-size":"24px","border-color":"red","border-width":"3px"}},{selector:"edge:selected",style:{"overlay-color":"grey","overlay-opacity":"0.3"}},{selector:'edge[edgeType="recruits"]',style:{width:"2px"}},{selector:'edge[edgeType="fusion"]',style:{"line-color":a}},{selector:'edge[edgeType="recruits"]',style:{"line-color":"red",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","target-arrow-color":"black"}},{selector:'edge[edgeType="cycles"]',style:{"line-color":"black",width:"1px","line-style":"dashed","target-arrow-shape":"triangle","source-arrow-shape":"triangle","target-arrow-color":"green","source-arrow-color":"red"}},{selector:'edge[edgeType="associates"]',style:{"line-color":"black",width:"1px","line-style":"solid"}},{selector:'edge[edgeType="activation"]',style:{"line-color":"green",width:"1px"}},{selector:'edge[edgeType="inhibition"]',style:{"line-color":"red",width:"1px"}}]}var r,s=this;s.datasource=a.datasource||"DEMOdz",s.toggleFilter=function(){$(".container-filters").toggleClass("container-filters-collapsed"),$(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},s.search="",s.frame,s.tip=null;var l,c=$("#gbm-chart");n.$watch("vm.search",function(){if(void 0!==l){var e=s.search.toUpperCase(),t=e.length;l.nodes().map(function(a,n,o){0==t?a.unselect():a.attr("name").substr(0,t)===e?a.select():a.unselect()})}}),e.setBusy(!0),e.setDataset(s.datasource).then(function(t){e.getPathway().then(function(t){r=angular.fromJson(t.payload),l=cytoscape({container:c,elements:r.elements,style:i(),layout:{name:"preset",fit:!0}}).on("select","node",function(e){$("#gbm-webpage").modal();var t="http://www.genecards.org/cgi-bin/carddisp.pl?gene="+e.cyTarget.data().id;n.$apply(function(){s.frame=o.trustAsResourceUrl(t)})}).on("select","edge",function(e){$("#gbm-webpage").modal();var t="http://www.ncbi.nlm.nih.gov/pubmed/?term="+e.cyTarget.data().pmid;n.$apply(function(){s.frame=o.trustAsResourceUrl(t)})}).on("mouseover","edge",function(e){n.$apply(function(){s.tip=e.cyTarget.data().source+" Extract"}),e.cyTarget.style({width:"4px"})}).on("mouseout","edge",function(e){n.$apply(function(){s.tip=null}),e.cyTarget.style({width:"2px"})}).on("mouseover","node",function(e){n.$apply(function(){s.tip=e.cyTarget.data().name+" Gene Card"})}).on("mouseout","node",function(e){n.$apply(function(){s.tip=null})}),e.setBusy(!1)})})}e.$inject=["osApi","$state","$stateParams","$scope","$sce"];var t={restrict:"E",templateUrl:"app/components/pathways/pathways.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osPathways",e)}(),function(){"use strict";function e(){function e(){return{name:"",password:"",domain:{name:"Guest"},authenticated:!1,token:null}}this.getUser=e}angular.module("oncoscape").service("osState",e)}(),function(){"use strict";function e(e,t,a,n){var o={},i=1,r=function(){return 9999==i&&(i=1),i++},s=new e("http://localhost/oncoscape/","",{debug:!0,devel:!0});s.onmessage=function(e){var t=angular.fromJson(e.data);if(angular.isDefined(o[t.cmd])){var a=o[t.cmd];delete o[t.cmd],a.resolve(t)}else n.error("Unhandled message: %o",t)};var l=function(e){e.callback=r(),e.status="request",e.payload=e.payload||"";var t=a.defer();return o[e.callback]=t,0===s.readyState?s.onopen=function(){s.send(angular.toJson(e))}:s.send(angular.toJson(e)),t.promise.then(function(t){return e.response=t,t})};return{request:l}}e.$inject=["SockJS","$rootScope","$q","$log"],angular.module("oncoscape").value("SockJS",window.SockJS).factory("osSocket",e)}(),function(){"use strict";function e(e,t){function a(e){var a={method:"POST",url:"http://localhost/login/",data:{username:e.name,password:e.password,domain:e.domain.name}};return t(a).then(function(t){t.data.success?(e.authenticated=!0,e.token=t.data.token):(e.authenticated=!1,e.token=null)})}function n(e){}function o(e){return e?$(".loader-modal").show():$(".loader-modal").hide(),i}function i(e){}function r(){return[{name:"Guest"},{name:"FHCRC"},{name:"SCCA"}]}function s(t){return e.request({cmd:"specifyCurrentDataset",payload:t})}function l(){return e.request({cmd:"getDataSetNames"})}function c(t){return e.request({cmd:"getDataManifest",payload:t})}function d(t){return e.request({cmd:"getPatientHistoryTable",payload:{datasetName:t,durationFormat:"byYear"}})}function p(){}function u(){}function g(){return e.request({cmd:"getGeneSetNames"})}function m(){return e.request({cmd:"getSampleCategorizationNames"})}function h(t){return e.request({cmd:"getSampleCategorization",payload:t})}function f(t){return e.request({cmd:"getMarkersNetwork",payload:t})}function v(){}function y(){}function b(){}function x(){}function w(){}function k(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPCA",payload:n})}function C(t){var a={genes:t};return e.request({cmd:"calculatePCA",payload:a})}function T(t,a){var n={dataPackage:t,matrixName:a};return e.request({cmd:"createPLSR",payload:n})}function S(t,a){var n={genes:t,factorCount:a.length,factors:a};return e.request({cmd:"calculatePLSR",payload:n})}function M(t){return t=t||["AgeDx","Survival"],e.request({cmd:"summarizePLSRPatientAttributes",payload:t})}function P(){}function A(){return e.request({cmd:"createTimelines"})}function D(){}function F(){return e.request({cmd:"getModuleModificationDate",payload:"gbmPathways"})}function v(){return e.request({cmd:"getPathway",payload:"g.gbmPathways.json"})}function E(t,a){return e.request({cmd:"get_mRNA_data",payload:{entities:t,features:a}})}function L(t,a){return e.request({cmd:"get_cnv_data",payload:{entities:t,features:a}})}function q(t,a){return e.request({cmd:"get_mutation_data",payload:{entities:t,features:a}})}this.setBusy=o,this.setBusyMessage=i,this.setIFrame=n,this.login=a,this.setDataset=s,this.getDomains=r,this.getDataSetNames=l,this.getDataManifest=c,this.getPatientHistoryTable=d,this.getPatientHistoryDxAndSurvivalMinMax=p,this.getSampleDataFrame=u,this.getGeneSetNames=g,this.getSampleCategorizationNames=m,this.getSampleCategorization=h,this.getMarkersNetwork=f,this.getPathway=v,this.getDrugGeneInteractions=y,this.getCanonicalizePatientIDsInDataset=b,this.getGeneSetGenes=x,this.getOncoprintDataSelection=w,this.getPCA=k,this.getCalculatedPCA=C,this.getPLSR=T,this.getCalculatedPLSR=S,this.getSummarizedPLSRPatientAttributes=M,this.getCalculatedSurvivalCurves=P,this.getTimelines=A,this.getCalculatedTimelines=D,this.getPathway=v,this.getMrnaData=E,this.getCnvData=L,this.getMutationData=q,this.getModuleModificationDate=F}e.$inject=["osSocket","$http"],angular.module("oncoscape").service("osApi",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){var i=this;i.dataset=o.datasource||"DEMOdz",i.colnames=[],i.rows=[],i.search="",i.toggleFilter=function(){$(".container-filters").toggleClass("container-filters-collapsed"),$(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")};var r;e.setBusy(!0),e.getDataManifest(i.dataset).then(function(t){i.colnames=t.payload.colnames,i.rows=t.payload.mtx,a(function(){r=$("#metadata-datatable").dataTable({paging:!1}),n.$watch("vm.search",function(){r.api().search(i.search).draw()}),e.setBusy(!1)},0,!1)})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/metadata/metadata.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMetadata",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o,i,r,s){var l={darkblue:"rgb(5, 108, 225)",blue:"rgb(19, 150, 222)",black:"black",white:"white",red:"red",purple:"rgb(56, 52,123)",gray:"#CCC"},c=[{selector:"node",style:{"background-color":l.black,"border-opacity":1,"border-color":l.red,"border-width":"0px",height:"20px",width:"20px",label:" data(id)","text-halign":"right","text-valign":"center","text-background-color":l.white,"text-background-opacity":".8","text-background-shape":"roundrectangle","font-size":"0px"}},{selector:'node[nodeType="patient"]',style:{"background-color":l.blue,height:"50px",width:"50px"}},{selector:"edge",style:{"line-color":l.gray,"line-style":"solid",width:"3px",display:"none"}},{selector:'edge[edgeType="chromosome"]',style:{"line-color":l.darkblue,display:"element"}},{selector:'node[nodeType="gene"]',style:{"border-color":l.blue,"border-width":"3px","background-color":l.white,height:"mapData(degree, 0, 50, 10.0, 80.0)",width:"mapData(degree, 0, 50, 10.0, 80.0)"}},{selector:'node[nodeType="patient"]:selected',style:{"background-color":l.red,width:"100px",height:"100px",shape:"diamond"}}],d=function(e,t){var a=function(){var e=new r.Signal,t=new r.Signal,a=new r.Signal,n=new r.Signal,o=new r.Signal,i=new r.Signal,s=function(){e.removeAll(),t.removeAll(),n.removeAll(),o.removeAll(),a.removeAll(),i.removeAll()},l=function(t){e.add(t),n.add(t)},c=function(e){t.add(e),o.add(e)},d=function(e){a.add(e),i.add(e)};return{geneOver:e,geneOut:t,geneClick:a,patientOver:n,patientOut:o,patientClick:i,over:l,out:c,click:d,removeAll:s}}();e.on("click",'node[nodeType="gene"]',a.geneClick.dispatch).on("click",'node[nodeType="patient"]',a.patientClick.dispatch).on("mouseover",'node[nodeType="gene"]',a.geneOver.dispatch).on("mouseover",'node[nodeType="patient"]',a.patientOver.dispatch).on("mouseout",'node[nodeType="gene"]',a.geneOut.dispatch).on("mouseout",'node[nodeType="patient"]',a.patientOut.dispatch);var o=[{name:"None",register:function(){},unregister:function(){}},{name:"Show All Edges",register:function(){a.over(function(e){"patient"==e.cyTarget.data().nodeType&&n.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),e.cyTarget.style({"font-size":"100px"}),e.cyTarget.animate({style:{"border-width":150}},{duration:300}),e.cyTarget.neighborhood("node").style({"font-size":"70px"})}),a.out(function(e){n.$apply(function(){t.patient=t.patientChromosomes=null}),e.cyTarget.style({"font-size":"0px"}),e.cyTarget.animate({style:{"border-width":0}},{duration:100}),e.cyTarget.neighborhood("node").style({"font-size":"0px"})}),e.$('edge[edgeType!="chromosome"]').style({display:"element"})},unregister:function(){a.removeAll(),e.$('edge[edgeType!="chromosome"]').style({display:"none"})}},{name:"One Degree",register:function(){a.click(function(e){var a=t.datasource;if(a.indexOf(!1)){var o=a.substr(4)+"_tcga",i=e.cyTarget.neighborhood("node").map(function(e){return e.data().name}).join("+"),r="http://www.cbioportal.org/ln?cancer_study_id="+o+"&q="+i;n.$apply(function(){window.open(r)})}}),a.over(function(e){"patient"==e.cyTarget.data().nodeType&&n.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),e.cyTarget.style({height:"60px",width:"60px","font-size":"100px"}),e.cyTarget.neighborhood("node").style({"font-size":"70px"}),e.cyTarget.neighborhood("edge").style({display:"element"})}),a.out(function(e){n.$apply(function(){t.patient=t.patientChromosomes=null}),e.cyTarget.style({height:"30px",width:"30px","font-size":"0px"}),e.cyTarget.neighborhood("node").style({"font-size":"0px"}),e.cyTarget.neighborhood("edge").style({display:"none"})})},unregister:function(){a.removeAll()}},{name:"Two Degrees",register:function(){a.over(function(e){"patient"==e.cyTarget.data().nodeType&&n.$apply(function(){t.patient=e.cyTarget.attr("patient"),t.patientChromosomes=e.cyTarget.neighborhood("node").map(function(e){return e.data().id})}),e.cyTarget.style({height:"60px",width:"60px","font-size":"100px"}),e.cyTarget.neighborhood("node").neighborhood("edge").style({"line-style":"dashed",display:"element"}),e.cyTarget.neighborhood("edge").style({"line-style":"solid"})}),a.out(function(e){n.$apply(function(){t.patient=t.patientChromosomes=null}),e.cyTarget.style({height:"30px",width:"30px","font-size":"0px"}),e.cyTarget.neighborhood("node").neighborhood("edge").style({"line-style":"solid",display:"none"})})},unregister:function(){a.removeAll()}}];return n.$watch("vm.optInteractiveMode",function(e,t){t.unregister(),e.register()}),o},p=function(e,t,a){var n=function(n){e.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"}),a.getSampleCategorization(n.name).then(function(a){t.legandNodes=a.payload.tbl.map(function(e){return e[0]+"|"+e[1]}).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){var t=e.split("|");return{name:t[0],color:t[1]}}),e.$('node[nodeType="patient"]').forEach(function(e,t,a){for(var n=e.data().id,t=0;t<this.rownames.length;t++)if(n===this.rownames[t]){e.style({"background-color":this.tbl[t][1]});break}},a.payload)})};a.getSampleCategorizationNames().then(function(e){t.optNodeColors=t.optNodeColors.concat(e.payload.map(function(e){return{name:e,fn:n}}))}),t.legandNodes=[{name:"Patients",color:"#3993fa"}];var o=[{name:"Default",fn:function(a){t.legandNodes=[{name:"Patients",color:"#3993fa"}],e.$('node[nodeType="patient"]').style({"background-color":"rgb(19, 150, 222)"})}},{name:"Gender",fn:function(a){t.legandNodes=[{name:"Male",color:"blue"},{name:"Female",color:"pink"}],e.$('node[nodeType="patient"]').forEach(function(e,t,a){try{e.style({"background-color":"male"===e.data().patient[2]?"rgb(5, 108, 225)":"female"===e.data().patient[2]?"pink":"black"})}catch(n){console.log(e.data().id)}})}},{name:"Age At Diagnosis",fn:function(a){t.legandNodes=[{name:"Young",color:"green"},{name:"Old",color:"red"}];e.$('node[nodeType="patient"]').forEach(function(e,t,a){try{var n=e.data().patient[4];e.style({"background-color":"rgb("+255*n/100+","+255*(100-n)/100+",0)"})}catch(o){console.log(e.data().id)}})}}];return t.optNodeColor=o[0],o},u=function(e){var t=function(t){var a=$("."+t["class"]);switch(t.state){case"Visible":t.state="Highlight",a.css("border-color",t.color),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":t.color,width:"5px"});break;case"Hidden":t.state="Visible",a.css("border-color",l.gray),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":"#CCC",width:"5px"});break;default:t.state="Hidden",a.css("border-color",l.white),e.$('edge[edgeType="'+t.name+'"]').style({width:"0px"})}},n=[{name:"mutation","class":"edgeMutation",color:"#004358",state:"Highlight",fn:t},{name:"cnGain.1","class":"edgeCnGain1",color:"#1F8A70",state:"Highlight",fn:t},{name:"cnLoss.1","class":"edgeCnLoss1",color:"#BEDB39",state:"Highlight",fn:t},{name:"cnGain.2","class":"edgeCnGain2",color:"#FFE11A",state:"Highlight",fn:t},{name:"cnLoss.2","class":"edgeCnLoss2",color:"#FD7400",state:"Highlight",fn:t}];return a(function(){n.forEach(function(t){$("."+t["class"]).css("border-color",t.color),e.$('edge[edgeType="'+t.name+'"]').style({"line-color":t.color,width:"5px"})})}),n},g=function(e,t){var a=[{name:"Hobo",fn:function(a){t.optPatientLayout=a,e.$('node[nodeType="patient"]').forEach(function(e){e.position(e.data().pos)})}},{name:"Age At Diagnosis",fn:function(a){t.optPatientLayout=a,e.$('node[nodeType="patient"]').forEach(function(e){try{e.position({x:500,y:60*e.data().patient[4]-3e3})}catch(t){}})}},{name:"Gender",fn:function(a){t.optPatientLayout=a;var n=1e3,o=1e3;e.$('node[nodeType="patient"]').forEach(function(e){try{"male"==e.data().patient[2].toLowerCase()?e.position({x:n-=50,y:500}):e.position({x:o-=50,y:-500})}catch(t){}})}}];return t.optPatientLayout=a[0],a},m=this;m.datasource=o.datasource||"DEMOdz",m.optInteractiveModes,m.optInteractiveMode,m.optPatientLayouts,m.optPatientLayout,m.optNodeColors,m.optNodeColor,m.optEdgeColors,m.legandNodes,m.legandPatient,m.legandChromosomes,m.frame;var h,f=$("#markers-chart"),v={patient:null,markers:null};e.setBusy(!0),e.setDataset(m.datasource).then(function(t){e.getPatientHistoryTable(m.datasource).then(function(t){v.patient=t.payload,e.getMarkersNetwork(t.payload).then(function(t){v.markers=angular.fromJson(t.payload),v.markers.elements.nodes.filter(function(e){return"patient"===e.data.nodeType}).map(function(e,t,a){e.data.pos={x:e.position.x,y:e.position.y},e.data.patient=v.patient.tbl.filter(function(t){return t[0]===e.data.id})[0]}),h=i({container:f,elements:v.markers.elements,style:c,layout:{name:"preset",fit:!0}}),m.optPatientLayouts=g(h,m),m.optEdgeColors=u(h,m,a),m.optNodeColors=p(h,m,e),m.optInteractiveModes=d(h,m,n),m.optInteractiveMode=m.optInteractiveModes[0],e.setBusy(!1)})})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams","cytoscape","signals","$sce"];var t={restrict:"E",templateUrl:"app/components/markers/markers.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osMarkers",e)}(),function(){"use strict";function e(){function e(e,t,a){var n=this;n.domains=e.getDomains(),n.user=t.getUser(),n.hasError=!1,n.login=function(){e.login(n.user).then(function(){n.user.authenticated?a.go("datasource"):n.hasError=!0})}}e.$inject=["osApi","osState","$state"];var t={restrict:"E",templateUrl:"app/components/login/login.html",replace:!0,scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLogin",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/loader/loader.html",replace:!0};return e}angular.module("oncoscape").directive("osLoader",e)}(),function(){"use strict";function e(){function e(e){var t=this;t.login=function(){e.go("login")}}e.$inject=["$state"];var t={restrict:"E",templateUrl:"app/components/landing/landing.html",replace:!0,scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osLanding",e)}(),function(){"use strict";function e(){function e(e,t,a,n,o){var i=this;i.datasource=o.datasource||"DEMOdz",i.colnames=[],i.rows=[],i.deathMinFilter=i.deathMinValue=1,i.deathMaxFilter=i.deathMaxValue=99,i.survivalMinFilter=i.survivalMinValue=0,i.survivalMaxFilter=i.survivalMaxValue=10,i.search="",i.toggleFilter=function(){angular.element(".container-filters").toggleClass("container-filters-collapsed"),angular.element(".container-filter-toggle").toggleClass("container-filter-toggle-collapsed")},i.applyFilter=function(){angular.element.fn.DataTable.ext.search=[function(e,t){var a=parseFloat(t[3]),n=parseFloat(t[4]);return isNaN(a)||isNaN(n)?!1:n>=i.deathMinFilter&&n<=i.deathMaxFilter&&a>=i.survivalMinFilter&&a<=i.survivalMaxFilter}],r.api().draw()};var r;e.setBusy(!0),e.setDataset(i.datasource).then(function(){e.getPatientHistoryTable(i.datasource).then(function(t){i.colnames=t.payload.colnames,i.rows=t.payload.tbl,a(function(){r=angular.element("#history-datatable").dataTable({scrollY:"70vh",paging:!1}),n.$watch("vm.search",function(){r.api().search(i.search).draw()}),e.setBusy(!1)},0,!1)})})}e.$inject=["osApi","$state","$timeout","$scope","$stateParams"];var t={restrict:"E",templateUrl:"app/components/history/history.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHistory",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/header/header.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osHeader",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/footer/footer.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFooter",e)}(),function(){"use strict";function e(){function e(e,t,a){function n(e){var t=p.nodes(e).reverse(),a=p.links(t);t.forEach(function(e){e.y=80*e.depth});var n=g.selectAll("g.node").data(t,function(e){return e.id||(e.id=++d)}),o=n.enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.y+","+e.x+")";
});o.append("circle").attr("r",function(e){return"null"==e.parent?35:15});var i=g.selectAll("path.link").data(a,function(e){return e.target.id});i.enter().insert("path","g").attr("class","link").style("stroke","#3993fa").attr("d",u)}var o=this;o.datasource=t.datasource||"DEMOdz";var i={name:o.datasource,parent:"null",children:[{name:"Level 2: A",children:[{name:"Son of A"},{name:"Daughter of A",children:[{name:"Son of A"},{name:"Daughter of A"}]}]},{name:"Level 2: B"}]},r=angular.element("#filters-chart"),s={top:20,right:20,bottom:30,left:40},l=r.width()-s.left-s.right,c=r.height()-s.top-s.bottom,d=0,p=a.layout.tree().size([c,l]),u=a.svg.diagonal().projection(function(e){return[e.y,e.x]}),g=a.select("#filters-chart").append("svg").attr("width",l+s.right+s.left).attr("height",c+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.top+")"),m=i;n(m)}e.$inject=["osApi","$stateParams","d3"];var t={restrict:"E",templateUrl:"app/components/filters/filters.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osFilters",e)}(),function(){"use strict";function e(){function e(e,t){var a=this;a.datasets=[],a.explore=function(e,a){t.go(e,{datasource:a})},e.setBusy(!0),e.getDataSetNames().then(function(t){a.datasets=t.payload.datasets,e.setBusy(!1)})}e.$inject=["osApi","$state"];var t={restrict:"E",templateUrl:"app/components/datasource/datasource.html",controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osDatasource",e)}(),function(){"use strict";function e(){function e(){}var t={restrict:"E",templateUrl:"app/components/compare/compare.html",scope:{},controller:e,controllerAs:"vm",bindToController:!0};return t}angular.module("oncoscape").directive("osCompare",e)}(),function(){"use strict";function e(e,t){t.$on("$stateChangeStart",function(e,t,a,n,o,i){angular.element.fn.DataTable.ext.search=[]}),e.debug("runBlock end")}e.$inject=["$log","$rootScope"],angular.module("oncoscape").run(e)}(),function(){"use strict";function e(e,t){e.state("landing",{url:"/",template:"<os-landing>"}).state("login",{url:"/login",template:"<os-login>"}).state("datasource",{url:"/datasource",template:"<os-datasource>"}).state("tools",{url:"/tools",template:"<os-tools>"}).state("metadata",{url:"/metadata/{datasource}",template:"<os-metadata>"}).state("history",{url:"/history/{datasource}",template:"<os-history>"}).state("plsr",{url:"/plsr/{datasource}",template:"<os-plsr>"}).state("pca",{url:"/pca/{datasource}",template:"<os-pca>"}).state("markers",{url:"/markers/{datasource}",template:"<os-markers>"}).state("pathways",{url:"/pathways/{datasource}",template:"<os-pathways>"}).state("timelines",{url:"/timelines/{datasource}",template:"<os-timelines>"}).state("compare",{url:"/compare/{datasource}",template:"<os-compare>"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("oncoscape").config(e)}(),function(){"use strict";angular.module("oncoscape").constant("d3",d3).constant("cytoscape",cytoscape).constant("signals",signals).constant("$",$)}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}e.$inject=["$logProvider","toastrConfig"],angular.module("oncoscape").config(e)}(),angular.module("oncoscape").run(["$templateCache",function(e){e.put("app/components/compare/compare.html",'<section class="compare-v50"><os-plsr></os-plsr></section><section class="compare-v50"><os-pca></os-pca></section>'),e.put("app/components/datasource/datasource.html",'<section class="datasource"><div class="container"><div class="row"><h2>Data Sources</h2><p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p></div><div class="row"><ul><li ng-repeat="dataset in vm.datasets"><img src="/assets/images/datasets/{{dataset}}.png"><h2>{{dataset}}</h2><p>Lorem ipsum dolor sit amet, cras eu mollis vivamus, ad sollicitudin rhoncus dui proin. Dolor elit ut condimentum luctus ipsam, suspendisse auctor, bibendum cubilia tellus ultrices pellentesque dictumst, egestas lectus in mattis mi class ac.</p><nobr><a ng-click="vm.explore(\'metadata\',dataset)">Metadata</a> &nbsp;|&nbsp; <a ng-click="vm.explore(\'history\',dataset)">Patient History</a> &nbsp;|&nbsp; <a ng-click="vm.explore(\'markers\',dataset)">Markers + Patients</a> &nbsp;|&nbsp; <a ng-click="vm.explore(\'pathways\',dataset)">Pathways</a> &nbsp;|&nbsp; <a ng-click="vm.explore(\'plsr\',dataset)">PLSR</a> &nbsp;|&nbsp; <a ng-click="vm.explore(\'pca\',dataset)">PCA</a> &nbsp;|&nbsp; <a ng-click="vm.explore(\'timelines\',dataset)">Timelines</a></nobr></li></ul></div></div><br><br></section>'),e.put("app/components/filters/filters.html",'<section class="filters container" id="filters-chart"></section>'),e.put("app/components/footer/footer.html",'<footer class="footer container"><div class="row"><div class="col-xs-12 col-sm-6"><img class="footer-logo" src="/assets/images/logo-fred-hutchinson-cancer-research-center.png" alt="Fred Hutchinson Cancer Research Center"> <img class="footer-logo" src="/assets/images/logo-university-of-washington-medicine.png" alt="UW Medicine"> <img class="footer-logo" src="/assets/images/logo-seattle-cancer-care-alliance.png" alt="Seattle Cancer Care Alliance"></div><div class="col-xm-12 col-sm-6 text-right"><a href="https://www.facebook.com/STTRCancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-facebook-out.png" alt="Facebook"></a> <a href="https://twitter.com/sttrcancer" target="_blank"><img class="footer-icon" src="/assets/images/sttr-twitter-out.png" alt="Twitter"></a> <a href="https://plus.google.com/+fredhutch/videos" target="_blank"><img class="footer-icon" src="/assets/images/sttr-youtube-out.png" alt="YouTube"></a> <a href="http://instagram.com/FredHutch" target="_blank"><img class="footer-icon" src="/assets/images/sttr-instagram-out.png" alt="Instagram"></a> <a href="http://www.linkedin.com/company/fred-hutchinson-cancer-research-center/careers?trk=top_nav_careers" target="_blank"><img class="footer-icon" src="/assets/images/sttr-linkedin-out.png" alt="LinkedIn"></a> <a href="https://plus.google.com/116048577052683099154/posts" target="_blank"><img class="footer-icon" src="/assets/images/sttr-google-out.png" alt="Google+"></a></div></div></footer>'),e.put("app/components/header/header.html",'<nav class="navbar navbar-inverse navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img alt="Brand" src="/assets/images/logo.png" style="max-height:50px;"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="#tools"><span class="glyphicon glyphicon-signal"></span>Tools</a></li><li><a href="#datasource"><span class="glyphicon glyphicon-equalizer"></span>Data Sources</a></li><li><a href="#tools"><span class="glyphicon glyphicon-th"></span>Cohorts</a></li><li><a href="#datasource"><span class="glyphicon glyphicon-user"></span>Account</a></li></ul></div></div></nav>'),e.put("app/components/history/history.html",'<section class="history container container-filters"><h2>Patient History ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Age At Death</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-4" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.applyFilter()"></div></div><div class="col-xs-4" style="padding-right:20px;"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width:80%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="history container" style="padding-top:20px;"><table id="history-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),e.put("app/components/landing/landing.html",'<div class="landing container"><div class="row" style="padding-top:20px;"><div class="col-sm-8"><h2>Bridging Cancer Research and Clinical Care</h2><p class="">Oncoscape is developed at the Fred Hutchinson Cancer Research Center under the auspices of the Solid Tumor Translational Research initiative. Oncoscape is a web-based, menu-driven analysis and visualization platform for large-scale, heterogeneous clinical and molecular patient timeline data as exemplified by the Fred Hutch HIDRA database. Oncoscape was conceived, and is managed, by a Steering Committee comprising: <a href="https://www.fredhutch.org/en/labs/profiles/holland-eric.html">Eric Holland</a>, <a href="http://www.sttrcancer.org/en/contact-us/horse-grant-bio.html">Desert Horse-Grant</a>, <a href="https://www.fredhutch.org/en/diseases/featured-researchers/fearn-paul.html">Paul Fearn</a>, <a href="https://www.linkedin.com/in/paul-shannon-a9478166">Paul Shannon</a>, <a href="https://www.linkedin.com/in/lisa-mcferrin-9758b029">Lisa McFerrin</a>, and <a href="https://www.linkedin.com/in/hbolouri">Hamid Bolouri</a>.</p><p class="">Through its easy point-and-click browser interface, Oncoscape will become an essential tool for doctors and researchers interested in:</p><ul class=""><li>Comparing patients or populations across an array of features, like genetic alterations (CNV, IHC, sequencing, expression) or clinical elements (treatment regimens, diagnostics, outcomes)</li><li>Defining cohorts based on selected traits – identifying “patients like me”</li><li>Aligning patient histories according to timeline events: diagnosis, treatment, progression, survival</li><li>Performing powerful and integrated statistical analysis: Principle Component Analysis, Partial least squares regression, Kaplan-Meier curves, enrichment scores</li><li>Creating high quality visualizations of molecular/clinical data</li></ul><p class="">By providing a portal equipped with rich data, powerful statistics and a simple interface, Oncoscape not only empowers users to quickly answer questions themselves but also expedites the process of discovering novel patterns and relationships. This can lead to numerous possible findings, including optimized drug therapies for individual patients, identification of novel regulatory pathways, or even the need to reassess adherence strategies.</p></div><div class="col-sm-4" style="padding-top:50px;"><div><os-login></os-login></div></div></div></div>'),e.put("app/components/loader/loader.html",'<div class="loader-modal"><div class="loader"><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__bar"></div><div class="loader__ball"></div></div></div>'),e.put("app/components/login/login.html",'<form class="login"><h3 class="login-header">Login</h3><div class="login-body"><div class="alert alert-danger" role="alert" ng-show="vm.hasError"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> <span class="sr-only">Error:</span> Invalid Credentials</div><fieldset class="form-group"><span for="domain" class="small">Affiliation</span><select id="domain" class="form-control" ng-options="option.name for option in vm.domains track by option.name" ng-model="vm.user.domain"></select></fieldset><fieldset class="form-group"><span class="form-control-label small" for="username">Username</span> <input id="username" class="form-control input-sm" type="text" placeholder="Username" ng-model="vm.user.name"></fieldset><fieldset class="form-group" ng-show="vm.user.domain.name!=\'Guest\'"><span class="form-control-label small" for="password">Password</span> <input id="password" class="form-control" type="password" placeholder="Password" ng-model="vm.user.password"></fieldset><button class="btn btn-default" ng-click="vm.login()">Login</button></div></form>'),e.put("app/components/markers/markers.html",'<section class="markers container container-filters"><h2>Markers + Patients ({{vm.datasource}})</h2><div class="row"><div class="col-xs-3" style="padding-right:20px;"><label>Interactive Mode</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optInteractiveMode.name}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="width:100%"><li ng-repeat="item in vm.optInteractiveModes" ng-click="vm.optInteractiveMode=item">{{item.name}}</li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Layout Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.optPatientLayout.name}} <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patient Distribution</li><li ng-repeat="item in vm.optPatientLayouts" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item)">{{item.name}}</label></li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Color Options</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Patients + Edges <span class="caret"></span></button><ul class="dropdown-menu filter-list" aria-labelledby="dropdownMenu1" style="width:100%"><li style="padding:5px;font-weight:600;">Patients Colors</li><li ng-repeat="item in vm.optNodeColors" class="radio" style="padding-left:10px"><label><input type="radio" name="patientType" ng-click="item.fn(item);"> {{item.name}}</label></li><li><hr></li><li style="padding:5px;font-weight:600;">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</button></li></ul></div></div><div class="col-xs-3" style="padding-right:20px;"><label>Search</label><div class="input-group"><input type="text" class="form-control" placeholder="Search for..." ng-model="vm.search" style="height: 28px;margin-top: 0px !important;"> <span class="input-group-btn"><button class="btn btn-default" type="button" style="height: 28px;margin-top: 0px !important;">Go</button></span></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="markers-chart" class="markers container-fluid container-content"></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><div class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Node Colors</li><li ng-repeat="item in vm.legandNodes"><div class="circle {{item.color}}"></div>{{item.name}}</li><li><hr></li><li style="padding:5px;font-weight:600;">Edge Colors</li><li ng-repeat="item in vm.optEdgeColors"><button class="btn btn-default filter-button {{item.class}}" ng-click="item.fn(item); $event.stopPropagation();">{{item.name}} ({{item.state}})</button></li></ul><ul class="legand" ng-if="vm.patient" style="width:250px;"><li><hr></li><li style="padding:5px;font-weight:600;">Patient Information</li><li>PID: {{vm.patient[0]}}</li><li>SID: {{vm.patient[1]}}</li><li>GENDER: {{vm.patient[2]}}</li><li>STATUS: {{vm.patient[6]}}</li><li>DIAGNOSED: {{vm.patient[4]}} years old</li><li>SURVIVED: {{vm.patient[3]}} years</li><li>PROGRESSION: {{vm.patient[5]}}</li><li><hr></li><li style="padding:5px;font-weight:600;">Genes ({{vm.patientChromosomes.length}})</li><li><span ng-repeat="item in vm.patientChromosomes">{{item}} |</span></li></ul><dl></dl></div>'),e.put("app/components/metadata/metadata.html",'<section class="metadata container container-filters"><h2>Metadata ({{vm.dataset}})</h2><div class="row"><div class="col-xs-4" style="margin: 10px 0 30px;"><label>Search</label> <input type="text" class="ngrs-range-slider ngrs-range-slider-no-pad" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section class="metadata container" style="padding-top:20px;"><table id="metadata-datatable" class="table table-striped table-bordered" cellspacing="0"><thead><tr><th ng-repeat="col in vm.colnames">{{col}}</th></tr></thead><tbody><tr ng-repeat="row in vm.rows"><td ng-repeat="datum in row track by $index">{{datum}}</td></tr></tbody></table></section>'),e.put("app/components/pathways/pathways.html",'<section class="pathways container container-filters"><h2>Pathways ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="gbm-chart" class="gbm container-fluid container-content"></section><div class="modal fade pathways" id="gbm-webpage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">{{vm.tip}}</h4></div><iframe class="modal-iframe" ng-src="{{vm.frame}}"></iframe></div></div></div><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Legend</li><li style="border:0px solid green; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Activation</li><li style="border:0px solid red; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Inhibition</li><li style="border:0px solid #38347B; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Modification</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Genes</li></ul><ul class="legand" ng-if="vm.tip"><li><hr></li><li style="padding:5px;font-weight:600;">Tip</li><li>View {{vm.tip}}</li></ul></section>'),e.put("app/components/pca/pca.html",'<section class="pca container container-filters"><h2>Principal Component Analysis({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;margin: 10px 0 30px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="pca-chart" class="pca container-fluid container-content" style="margin:50px;"></section><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Legend</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Patients</li><li><hr></li><li style="padding:5px;font-weight:600;">Proportion of Variance</li><li>PC1: {{vm.pc1*100}}%</li><li>PC2: {{vm.pc2*100}}%</li></ul></section>'),e.put("app/components/plsr/plsr.html",'<section class="plsr container container-filters"><h2>Partial Least Squares Regression ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Gene Set</label><div class="dropdown bs-dropdown"><button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{vm.geneSet}} <span class="caret"></span></button><ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li ng-repeat="item in vm.geneSets" ng-click="vm.geneSet=item">{{item}}</li></ul></div></div><div class="col-xs-4" style="padding-right:20px;"><label>Age At Diagnosis</label><div range-slider="" min="vm.deathMinValue" model-min="vm.deathMinFilter" max="vm.deathMaxValue" model-max="vm.deathMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div><div class="col-xs-4" style="padding-right:20px;"><label>Survival</label><div range-slider="" min="vm.survivalMinValue" model-min="vm.survivalMinFilter" max="vm.survivalMaxValue" model-max="vm.survivalMaxFilter" show-values="true" attach-handle-values="true" on-handle-up="vm.update()"></div></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="plsr-chart" class="plsr container-fluid container-content"></section><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Legend</li><li style="border:0px solid #1396de; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Age At Diagnosis</li><li style="border:0px solid #38347b; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Survival</li><li><span class="circle" style="background-color:black;width:10px;height: 10px;margin-right:10px;"></span>Genes</li></ul></section>'),e.put("app/components/timelines/timelines.html",'<section class="timelines container container-filters"><h2>Timelines ({{vm.datasource}})</h2><div class="row"><div class="col-xs-4" style="padding-right:20px;"><label>Search</label> <input type="text" class="ngrs-range-slider" style="width:100%" ng-model="vm.search"></div></div></section><section class="container-filter-toggle"><img src="/assets/images/arrow_down.png" ng-click="vm.toggleFilter()"></section><section id="timelines-chart" class="timelines container-fluid container-content"></section><section class="markers container-legand"><ul class="legand"><li style="padding:5px;font-weight:600;">Events</li><li style="border:0px solid green; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Birth</li><li style="border:0px solid red; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Encounter</li><li style="border:0px solid #38347B; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Diagnosis</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Procedure</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Pathology</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Radiation</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Drug</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Progression</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Status</li><li style="border:0px solid #056ce1; border-left-width:10px; padding-left:10px;margin-bottom:1px;">Absent</li></ul></section>'),e.put("app/components/tools/tools.html",'<section class="datasource"><div class="container"><div class="row"><h2>Tools</h2><p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p></div><div class="row"><ul><li ng-repeat="tool in vm.tools"><img src="/assets/images/datasets/{{tool.img}}"><h2>{{tool.name}}</h2><p>Lorem ipsum dolor sit amet, cras eu mollis vivamus, ad sollicitudin rhoncus dui proin. Dolor elit ut condimentum luctus ipsam, suspendisse auctor, bibendum cubilia tellus ultrices pellentesque dictumst, egestas lectus in mattis mi class ac. Etiam odio leo vestibulum id, dui pede faucibus cras orci sit primis, massa lacus consectetuer urna pulvinar fusce.</p><a ng-click="vm.explore(tool.route, \'DEMOdz\')">Demo</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAbrain\')">Brain</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAbrca\')">Brca</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAcoadread\')">Coadread</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAgbm\')">Gbm</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAhnsc\')">Hnsc</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAluad\')">Luad</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAlung\')">Lung</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAlusc\')">Lusc</a> &nbsp;|&nbsp; <a ng-click="vm.explore(tool.route, \'TCGAprad\')">Prad</a></li></ul></div></div></section>')}]);
//# sourceMappingURL=../maps/scripts/app-af94e7848b.js.map
